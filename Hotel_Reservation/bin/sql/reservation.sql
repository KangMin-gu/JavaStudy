-- 2016년 6월 29일 31기 제 2차 역량평가 관련 Query
-- 호텔 객실 예약 프로그램

-- 테이블 생성(룸)
CREATE TABLE ROOM(
  ROOMID NUMBER(10) PRIMARY KEY,
  ROOMNUM NUMBER(10) UNIQUE,
  ROOMTYPE VARCHAR2(20),
  ROOMSIZE NUMBER(2),
  VIEWTYPE VARCHAR2(20),
  PRICE NUMBER(15) NOT NULL
);

-- 시퀀스 생성(룸)
CREATE SEQUENCE ROOM_SEQ;

-- 테이블 생성(예약)
CREATE TABLE RESERVEINFO(
  RESERVECODE NUMBER PRIMARY KEY,
  RESERVERNAME VARCHAR2(30) NOT NULL,
  RESERVERPHONE VARCHAR2(20) NOT NULL, 
  ROOMNUM NUMBER,
  CHECKIN DATE NOT NULL,
  CHECKOUT DATE NOT NULL,
  MEANINGDAY NUMBER(10) DEFAULT 1,
  ADULTCOUNT NUMBER(2) DEFAULT 2,
  CHILDCOUNT NUMBER(2) DEFAULT 0,
  ADULTBREAKFAST NUMBER(2) DEFAULT 0,
  CHILDBREAKFAST NUMBER(2) DEFAULT 0,
  TOTALPRICE NUMBER(15),
  FOREIGN KEY (ROOMNUM) REFERENCES ROOM(ROOMNUM)
);

-- 시퀀스 생성(예약)
CREATE SEQUENCE RESERVEINFO_SEQ;


-- 테스트 쿼리
SELECT * FROM RESERVEINFO;

SELECT * FROM ROOM;

SELECT * FROM RESERVEINFO WHERE RESERVERNAME = '장민식' AND RESERVERPHONE = '010-4399-8611';

DELETE FROM RESERVEINFO WHERE RESERVERNAME = '쯔위' AND RESERVERPHONE = '010-3232-5454';

SELECT ((TO_DATE('2016/06/28', 'YYYY/MM/DD') - TO_DATE('2016/06/25', 'YYYY/MM/DD')))mene FROM DUAL;

SELECT PRICE FROM ROOM WHERE ROOMNUM = '201';

SELECT * FROM ROOM WHERE ROOMNUM NOT IN (SELECT ROOMNUM FROM RESERVEINFO);

UPDATE RESERVEINFO SET CHECKIN = '2016/06/19', CHECKOUT = '2016/06/22' WHERE RESERVERNAME = '장민식';
-- 테스트 쿼리 끝


-- 인서트 쿼리
INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 201, 'Standard', 46, 'Mountain', 220000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 202, 'Standard', 46, 'Mountain', 220000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 203, 'Standard', 46, 'Mountain', 220000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 204, 'Standard', 46, 'Garden', 220000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 205, 'Standard', 46, 'Garden', 220000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 301, 'Premier', 63, 'Mountain', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 302, 'Premier', 63, 'Mountain', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 303, 'Premier', 63, 'Mountain', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 304, 'Premier', 63, 'Garden', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 305, 'Premier', 63, 'Garden', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 401, 'Premier', 63, 'Garden', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 402, 'Premier', 63, 'Garden', 370000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 403, 'Premier', 63, 'Ocean', 400000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 404, 'Premier', 63, 'Ocean', 400000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 405, 'Premier', 63, 'Ocean', 400000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 501, 'Standard', 63, 'Mountain', 450000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 502, 'Standard', 63, 'Garden', 450000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 503, 'Suite', 76, 'Ocean', 500000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 504, 'Suite', 76, 'Ocean', 500000 );

INSERT INTO ROOM 
VALUES (ROOM_SEQ.NEXTVAL, 505, 'Suite', 76, 'Ocean', 500000 );

SELECT * FROM ROOM;

COMMIT;